{"version":3,"sources":["../../src/routes/user.js"],"names":["module","exports","app","post","passport","authenticate","session","config","accessLevels","admin","create","login","get","findAllUsers","findById","put","user","update","delete","deleteUser"],"mappings":";;AAAA;;;;AACA;;;;AACA;;AACA;;;;AAIAA,OAAOC,OAAP,GAAiB,UAACC,GAAD,EAAS;AACxB;AACAA,MAAIC,IAAJ,CACE,mBADF,EAEEC,mBAASC,YAAT,CAAsB,KAAtB,EAA6B,EAAEC,SAAS,KAAX,EAA7B,CAFF,EAGE,6BAAUC,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCC,YAArC,CAHF;;AAMA;AACAR,MAAIC,IAAJ,CAAS,kBAAT,EAA6BQ,WAA7B;;AAEA;AACAT,MAAIU,GAAJ,CACE,YADF,EAEER,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUC,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCI,kBAArC,CALF;;AAQA;AACAX,MAAIU,GAAJ,CACE,oBADF,EAEER,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUC,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCK,cAArC,CALF;;AAQA;AACAZ,MAAIa,GAAJ,CACE,oBADF,EAEEX,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUC,iBAAOC,YAAP,CAAoBQ,IAA9B,EAAoCC,YAApC,CALF;;AAQA;AACAf,MAAIgB,MAAJ,CACE,oBADF,EAEEd,mBAASC,YAAT,CAAsB,KAAtB,EAA6B;AAC3BC,aAAS;AADkB,GAA7B,CAFF,EAKE,6BAAUC,iBAAOC,YAAP,CAAoBC,KAA9B,EAAqCU,gBAArC,CALF;AAQD,CA/CD","file":"user.js","sourcesContent":["import passport from 'passport';\r\nimport config from '../config/config';\r\nimport { allowOnly } from '../services/routesHelper';\r\nimport { create, login, findAllUsers, \r\n    findById, update, deleteUser\r\n} from '../controllers/user';\r\n\r\nmodule.exports = (app) => {\r\n  // create a new user\r\n  app.post(\r\n    '/api/users/create',\r\n    passport.authenticate('jwt', { session: false }),\r\n    allowOnly(config.accessLevels.admin, create)\r\n  );\r\n\r\n  // user login\r\n  app.post('/api/users/login', login);\r\n\r\n  //retrieve all users\r\n  app.get(\r\n    '/api/users', \r\n    passport.authenticate('jwt', { \r\n      session: false \r\n    }),\r\n    allowOnly(config.accessLevels.admin, findAllUsers)\r\n  );\r\n\r\n  // retrieve user by id\r\n  app.get(\r\n    '/api/users/:userId',\r\n    passport.authenticate('jwt', {\r\n      session: false,\r\n    }),\r\n    allowOnly(config.accessLevels.admin, findById)\r\n  );\r\n\r\n  // update a user with id\r\n  app.put(\r\n    '/api/users/:userId',\r\n    passport.authenticate('jwt', {\r\n      session: false,\r\n    }),\r\n    allowOnly(config.accessLevels.user, update)\r\n  );\r\n\r\n  // delete a user\r\n  app.delete(\r\n    '/api/users/:userId',\r\n    passport.authenticate('jwt', {\r\n      session: false,\r\n    }),\r\n    allowOnly(config.accessLevels.admin, deleteUser)\r\n  );\r\n\r\n};\r\n"]}